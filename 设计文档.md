# 设计文档

---

### 1. 引言

#### 1.1 编制目的
本文档旨在详细描述奖学金管理系统的设计方案，包括系统架构、功能模块、数据库设计、用户界面设计等。

#### 1.2 背景
随着学生人数的增加和奖学金种类的多样化，传统的手工管理方式已无法满足当前的需求。因此，需要一个自动化的奖学金管理系统来简化流程，提高效率。

#### 1.3 定义和术语
- **B/S架构**：浏览器/服务器架构。
- **API**：应用程序编程接口。
- **UI**：用户界面。

### 2. 总体设计

#### 2.1 系统架构
系统将采用B/S架构，用户通过Web浏览器访问系统。前端使用Next.js框架，后端通过API与数据库进行交互。
| 层级      | 组件     | 技术              |
| --------- | -------- | ----------------- |
| 用户界面  | 用户界面 | Next.js/React     |
| API服务层 | API服务  | Node.js + Next.js |
| 数据库    | 数据库   | MySQL             |

#### 2.2 技术选型
- **前端**：Next.js
- **后端**：Node.js（API Routes）
- **数据库**：MySQL
- **服务器**：Vercel（用于部署前端应用）

#### 2.3 系统组件
- 用户认证服务（使用NextAuth实现）
- 奖学金管理服务（通过Prisma与MySQL交互）
- 申请审批服务（提供API供管理员审批申请）
- 报表生成服务（提供统计数据的接口）

### 3. 功能模块设计

|        功能模块        |
| :--------------------: |
|    学生信息管理模块    |
|   奖学金信息管理模块   |
|   申请提交与审批模块   |
|   奖学金发放管理模块   |
| 报表生成与数据分析模块 |

#### 3.1 学生信息管理模块
- **功能描述**：允许学生注册和更新个人信息。
- **用户界面**：表单输入界面，信息展示界面。
- **后端逻辑**：身份验证、数据存储和检索（使用Prisma进行ORM操作）。

#### 3.2 奖学金信息管理模块
- **功能描述**：管理员添加、编辑和删除奖学金信息。
- **用户界面**：列表视图，表单编辑界面。
- **后端逻辑**：数据校验、CRUD操作（使用Prisma与MySQL进行数据操作）。

#### 3.3 申请提交与审批模块
- **功能描述**：学生提交申请，管理员审批申请。
- **用户界面**：申请表单，审批界面。
- **后端逻辑**：申请状态管理，审批逻辑（使用API Routes处理请求）。

#### 3.4 奖学金发放管理模块
- **功能描述**：跟踪奖学金发放状态，管理员更新发放信息。
- **用户界面**：发放状态视图，更新界面。
- **后端逻辑**：状态更新，通知发送（可使用邮件服务实现）。

#### 3.5 报表生成与数据分析模块
- **功能描述**：生成奖学金申请和发放的统计报表。
- **用户界面**：报表请求界面，报表展示界面。
- **后端逻辑**：数据聚合，报表生成（使用SQL查询生成报表）。

### 4. 数据库设计

#### 4.1 实体关系图
### 用户表 (User)
User_ID (PK)
User_Name
User_Password
User_Power

### 奖学金申请表 (ScholarshipApplication)
Student_uid (PK)
Student_timeon
Student_reason
Student_schedule
Review_ID (FK)

### 奖学金公告表 (Announcement)
id (PK)
Class_contexts
Class_releasetime
Class_uid (FK)

### 审批表 (Review)
id (PK)
Class_id (FK)
Class_status

#### 4.2 数据表设计
详细描述每个数据表的结构，包括字段名称、数据类型、主键、外键等。
- **用户表**：存储用户信息
- **奖学金申请表**：存储学生的申请信息
- **奖学金公告表**：存储奖学金相关公告
- **审批表**：存储申请的审批信息

### 5. 用户界面设计

#### 5.1 界面流程图
[学生注册]
      |
      v
[个人信息输入] --> [信息展示]
      |
      v
[申请提交] --> [申请审批]
      |
      v
[奖学金发放]

#### 5.2 原型设计
提供用户界面的原型设计图。

### 6. 安全性设计

#### 6.1 用户认证
使用NextAuth进行用户认证，支持OAuth2.0。

#### 6.2 数据传输安全
使用HTTPS确保数据传输的安全。

#### 6.3 数据存储安全
使用数据库加密策略，定期备份数据库。

### 7. 性能设计

#### 7.1 负载均衡
部署在Vercel上，使用其自动负载均衡能力。

#### 7.2 缓存策略
使用Redis进行数据缓存，以提高响应速度。

### 8. 可靠性和可维护性设计

#### 8.1 系统监控
集成日志记录和性能监控工具，如Sentry或LogRocket。

#### 8.2 故障恢复
定期备份数据库，并实现快速恢复方案。

### 9. 部署计划

#### 9.1 部署环境
描述系统部署的硬件和软件环境。

#### 9.2 部署步骤
1. 在Vercel上创建项目。
2. 配置环境变量。
3. 部署Next.js应用。

### 10. 测试计划

#### 10.1 测试范围
描述测试的范围和目标，包括功能测试和性能测试。

#### 10.2 测试用例
提供关键功能的测试用例，如注册、申请提交和审批流程。

| 功能模块     | 测试用例           | 预期结果                     |
| ------------ | ------------------ | ---------------------------- |
| 学生注册模块 | 测试用户注册功能   | 注册成功，用户信息存储       |
| 申请提交模块 | 测试申请表提交功能 | 提交成功，申请状态更新       |
| 审批模块     | 测试审批功能       | 审批成功，状态更改为“已审批” |
| 报表生成模块 | 测试报表生成功能   | 报表成功生成，数据显示正确   |

### 11. 项目组织和分工

#### 11.1 项目团队

项目团队由五名成员组成，具体分工如下：

- **项目经理（Alice）**：负责项目的整体规划、进度管理和沟通协调，确保各个模块按时交付。
- **前端开发者（Bob）**：负责用户界面的设计和开发，使用Next.js实现响应式布局，确保良好的用户体验。
- **后端开发者（Charlie）**：负责API的设计与开发，使用Node.js和Prisma实现与MySQL数据库的交互。
- **数据库管理员（Diana）**：负责数据库设计和管理，确保数据的完整性和安全性，同时优化查询性能。
- **测试工程师（Eve）**：负责测试计划的制定和执行，确保系统的各个功能模块符合需求，进行功能测试和性能测试。

#### 11.2 里程碑计划

项目的关键里程碑和时间表如下：

| 里程碑         | 时间           | 说明                               |
| -------------- | -------------- | ---------------------------------- |
| 项目启动       | 2024年11月1日  | 项目立项，确定需求和技术方案       |
| 完成系统设计   | 2024年11月15日 | 完成系统架构、数据库设计和界面原型 |
| 完成前端开发   | 2024年12月15日 | 完成所有用户界面的开发             |
| 完成后端开发   | 2024年12月30日 | 完成API开发和数据库集成            |
| 测试阶段       | 2025年1月5日   | 进行功能测试和用户接受测试         |
| 系统部署       | 2025年1月15日  | 部署到生产环境，进行最后的验证     |
| 项目总结与评审 | 2025年1月30日  | 完成项目总结，进行经验教训分享     |

### 12. 预算和成本估算

#### 12.1 开发成本

估算开发成本如下：

- 人员成本：五名成员的薪资预算（假设每人每月2000元，项目持续3个月）
  - 总成本 = 5人 × 2000元 × 3个月 = 30000元
- 技术成本：
  - 服务器费用（Vercel、MySQL数据库）: 3000元
  - 开发工具及软件许可（如IDE等）：1000元

**总开发成本**：30000元 + 3000元 + 1000元 = **34000元**

#### 12.2 运营成本

估算运营成本如下：

- **服务器费用**（Vercel、MySQL等）: 600元/月
- **维护费用**（包括人员维护和更新）: 2000元/季度

**运营成本（年度）**：600元 × 12个月 + 2000元 = **7600元**

### 13. 风险评估

#### 13.1 技术风险

- **技术选型不当**：选择不合适的技术栈可能导致开发进度延误和性能问题。
  - **应对策略**：在项目启动前进行技术选型评估，确保团队熟悉所选技术。
- **系统安全性问题**：数据泄露或系统漏洞可能导致重大损失。
  - **应对策略**：实施安全编码实践，定期进行安全测试和漏洞扫描。

#### 13.2 项目风险

- **进度延误**：团队成员因个人原因可能导致项目进度延误。
  - **应对策略**：设置定期进度检查会议，及时调整工作计划。
- **需求变更**：用户需求变更可能影响项目的时间和成本。
  - **应对策略**：与相关方保持密切沟通，尽量控制需求变更。

### 14. 附录

### 14.1 术语表

- **API（应用程序编程接口）**：允许不同软件程序之间进行交互的定义和协议。
- **B/S架构（Browser/Server Architecture）**：指浏览器/服务器架构，一种常用的网络应用架构。
- **ORM（对象关系映射）**：一种将对象模型与数据库模型进行映射的技术，简化数据库操作。
- **JWT（JSON Web Token）**：一种用于用户身份验证的开放标准（RFC 7519），可以通过网络安全地传递信息。
- **HTTPS（超文本传输安全协议）**：HTTP协议的安全版本，通过SSL/TLS加密进行安全传输。
- **负载均衡**：将网络流量分配到多个服务器上的技术，以提高系统性能和可靠性。
- **缓存（Cache）**：在存储设备中临时保存数据以提高访问速度的技术。
- **数据加密**：通过算法将数据转换为不可读格式，以确保数据在传输和存储过程中的安全性。
- **故障恢复**：在系统出现故障后，恢复正常操作的过程和策略。
- **统计报表**：对数据进行整理和分析后生成的报告，通常用于决策支持。

### 14.2 参考文献

1. **Beck, K., & Andres, C. (2005).** Extreme Programming Explained: Embrace Change. Addison-Wesley.
2. **Fowler, M. (2002).** Patterns of Enterprise Application Architecture. Addison-Wesley.
3. **Sharma, R. (2020).** Node.js Design Patterns. Packt Publishing.
4. **Schmidt, D. C., & Stal, M. (2006).** Patterns for Distributed and Concurrent Systems. Wiley.
5. **Mann, A. (2018).** MySQL Cookbook: Solutions for Database Developers and Administrators. O'Reilly Media.
6. **Krebs, B. (2014).** Spam Nation: The Inside Story of Organized Cybercrime-from Global Epidemic to Your Front Door. Sourcebooks.
7. **Friedman, A. (2019).** Learning Next.js. Packt Publishing.
8. **Sharma, P., & Deshmukh, S. (2020).** Practical Guide to Using Prisma with Next.js. Technical Publishing.
